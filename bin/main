#!/usr/bin/env ruby
require_relative '../lib/board.rb'
require_relative '../lib/player.rb'
board = Board.new
board.create_board

validate = false
puts 'What is you name Player 1?'
name = gets.chomp

puts "#{name} type a symbol to play with (X, O)"
while validate == false
  symbol = gets.chomp.upcase
  if board.validate_symbol(symbol)
    validate = true
  else
    puts 'please enter a valid symbol'
  end
end

player1 = Player.new(name, symbol)

puts 'What is your name Player 2?'
name = gets.chomp
symbol = symbol == 'X' ? 'O' : 'X'

player2 = Player.new(name, symbol)

puts "#{player2.name} You have been assigned with #{player2.symbol} symbol"

def input(board)
  validate = false

  while validate == false
    turn = gets.chomp.to_i
    validate = board.validate_turn(turn)
    puts 'please enter a valid position' if validate == false
  end
  turn
end

turns = 0
while turns < 9
  puts "\n Its #{player1.name} turn now!"
  puts "#{player1.name}, You can put #{player1.symbol} in available spaces."

  board.display_board

  turn = input(board)

  board.place_symbol(turn, player1)

  if board.check_win(player1.array)
    puts "#{player1.name} won!"
    board.display_board
    break
  end
  board.display_board
  turns += 1

  unless turns == 9
    puts "\n Its #{player2.name} turn now!"
    puts "#{player2.name}, You can put #{player2.symbol} in available spaces."

    turn = input(board)

    board.place_symbol(turn, player2)
    if board.check_win(player2.array)
      puts "#{player2.name} won!"
      board.display_board
      break
    end
    board.display_board
  end
  turns += 1

end

puts 'Its a Draw!' if turns == 9
